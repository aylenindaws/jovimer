<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="indaws_sale_purchase_extended_view_order_form_2_inherit" model="ir.ui.view">
        <field name="name">indaws.sale.purchase.extended.view.order.form.2.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="bi_convert_purchase_from_sales.sale_order_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='cost_real']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='purchase_price']" position="replace"/>
            <xpath expr="//field[@name='purchase_price']" position="replace"/>
            <xpath expr="//field[@name='purchase_price']" position="replace"/>
        </field>
    </record>
    <record id="indaws_sale_purchase_extended_view_order_form_inherit" model="ir.ui.view">
        <field name="name">indaws.sale.purchase.extended.view.order.form.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='order_line']//label[@for='product_uom_qty']" position="replace"/>
            <xpath expr="//field[@name='order_line']//label[@for='qty_delivered']" position="replace"/>
            <xpath expr="//field[@name='order_line']//label[@for='qty_invoiced']" position="replace"/>
            <xpath expr="//field[@name='order_line']//div[@name='ordered_qty']" position="replace"/>
            <xpath expr="//group[@name='sale_shipping']" position="replace"/>
            <xpath expr="//field[@name='order_line']//div[@name='delivered_qty']" position='attributes'>
                <attribute name='invisible'>1</attribute>
            </xpath>
            <xpath expr="//field[@name='client_order_ref']" position="replace"/>
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="client_order_ref"/>
            </xpath>

            <xpath expr="//field[@name='order_line']//div[@name='invoiced_qty']" position='attributes'>
                <attribute name='invisible'>1</attribute>
            </xpath>
            <xpath expr="//field[@name='order_line']//field[@name='price_unit']" position="replace"/>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='supplier_id']" position="replace"/>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='product_uom']" position="replace"/>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='product_uom_qty']" position="replace"/>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='discount']" position="replace"/>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='price_unit']" position="replace"/>
            <xpath expr="//page[@name='order_lines']//field//tree//widget[@name='qty_at_date_widget']" position="replace"/>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='name']" position="after">
                <field name="price_trans" invisible="1" width="100px"/>
                <field name="cantidadpedido" string="Palets" optional="show" width="100px"/>
                <field name="tipouom" string="Tipo Medida" options="{'no_quick_create': True, 'no_create': True}" optional="show" width="100px"/>

                <field name="price_unit" optional="show" string="Pr. Venta" width="100px"/>
                <field name="discount" optional="show" string="Descuento" width="100px"/>
                <field context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}" name="product_uom_qty" string="Cantidad" optional="show" width="100px"/>
                <field name="product_uom" optional="show" string="Unidad Venta" width="100px"/>
                <widget name="qty_at_date_widget" width="20px"/>
                <field name="purchase_price" optional="show" string="Pr. compra" width="100px"/>
                <field name="supplier_id" optional="show" string="Proveedor" width="100px"/>
                <field name="discount_supplier" optional="show" string="Descuento proveedor" width="100px"/>
                <field name="uom_po_id" optional="show" string="Unidad Compra" width="100px"/>

                <field name="variedad" string="Variedad" optional="show" width="100px"/>
                <field name="calibre" string="Calibre" optional="show" width="100px"/>
                <field name="confeccion" string="Confección" optional="show" width="100px"/>
                <field name="categoria" string="Categoria" optional="show" width="100px"/>
                <field name="envase" string="Envase" optional="show" width="100px"/>
                <field name="marca" string="Marca" optional="show" width="100px"/>

                <field name="bultos" string="Bultos x palet" optional="show" width="100px"/>
                <field name="unidadesporbultor" string="Unidades x bulto" readonly="False" optional="show" width="100px"/>
                <field name="kgnetbulto" string="kg/net bulto" optional="show" width="100px"/>
                <field name="costetrans" optional="show" string="Transporte" width="100px"/>
            </xpath>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='name']" position="attributes">
                <attribute name="width">100px</attribute>
            </xpath>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='product_id']" position="attributes">
                <attribute name="width">100px</attribute>
            </xpath>
            <xpath expr="//page[@name='order_lines']//field//tree//field[@name='tax_id']" position="attributes">
                <attribute name="width">100px</attribute>
            </xpath>
            <!--<xpath expr="//page[@name='order_lines']//field//tree" position="attributes">
                <attribute name="editable"/>
            </xpath>-->
            <xpath expr="//page[@name='related_purchases']//field[@name='purchase_related_ids']" position="replace">
                <field name="purchase_related_ids">
                    <tree create='false'>
                        <field name="company_id" invisible="1"/>
                        <field name="partner_ref" optional="hide"/>
                        <field name="name"/>
                        <field name="date_approve" optional="hide"/>
                        <field name="partner_id"/>
                        <field name="date_planned" optional="hide"/>
                        <field name="user_id" optional="hide"/>
                        <field name="origin" optional="hide"/>
                        <field name="amount_untaxed" optional="hide"/>
                        <field name="amount_total" optional="hide"/>
                        <field name="state" optional="hide"/>
                        <field name="invoice_status" optional="hide"/>
                    </tree>
                </field>
            </xpath>
            <xpath expr="//page[@name='related_purchases']" position="after">
                <page name='administration_sale_lines' string="GERENCIA">
                    <field name="order_line_admin">
                        <tree create='false' editable="botttom">
                            <field name="margin" readonly="True"/>
                            <field name="purchase_price" string="Precio de compra" readonly="False"/>
                            <field name="price_unit" string="Precio de Venta" readonly="False"/>
                            <field name="product_id" string="Producto" readonly="False"/>
                            <field name="company_id" string="Compañia" invisible="True" optional="show"/>
                            <field name="price_trans" string="Precio por KG de Transporte" readonly="False" optional="show"/>
                            <field name="discount" optional="show" string="Descuento" width="100px"/>
                            <field name="discount_supplier" optional="show" string="Descuento proveedor (%)" width="100px"/>
                        </tree>
                    </field>
                </page>
            </xpath>
            <xpath expr="//field[@name='order_line']//field[@name='analytic_tag_ids']" position="after">
                <field name="price_unit" string="Precio de Venta"/>
                <field name="supplier_id" string="Proveedor"/>
                <field name="uom_po_id"/>
                <field name="purchase_price" string="Precio de compra"/>
                <field name="costetrans"/>
                <field name="discount_supplier" string="Descuento proveedor (%)"/>
            </xpath>
            <xpath expr="//page[@name='related_purchases']//field[@name='purchase_related_ids']" position="attributes">
                <attribute name="editable"/>
            </xpath>
            <xpath expr="//page[@name='order_lines']//field//form//div[@name='invoice_lines']" position="attributes">
                <attribute name='invisible'>1</attribute>
            </xpath>
            <xpath expr="//page[@name='order_lines']//field//form//div[@name='invoice_lines']" position="before">
                <group name="template">
                    <group name="template_left">
                        <field name="variedad"/>
                        <field name="calibre"/>
                        <field name="categoria"/>
                        <field name="confeccion"/>
                        <field name="envase"/>
                        <field name="marca"/>
                    </group>
                    <group name="template_right">
                        <field name="cantidadpedido" string="Palets:"/>
                        <field name="tipouom" options="{'no_quick_create': True, 'no_create': True}"/>
                        <field name="bultos"/>
                        <field name="unidadesporbultor" readonly="False"/>
                        <field name="kgnetbulto"/>
                        <label for="product_uom_qty"/>
                        <div class="o_row" name="ordered_qty">
                            <field context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}" name="product_uom_qty"/>
                            <field name="product_uom" force_save="1" groups="uom.group_uom" class="oe_no_button" attrs="{'readonly': [('product_uom_readonly', '=', True)],'required': [('display_type', '=', False)]}"/>
                        </div>
                    </group>
                </group>
            </xpath>
            <xpath expr="//field[@name='analytic_account_id']" position="replace">
                <field name="company_id" invisible='1'/>
            </xpath>
            <xpath expr="//div[hasclass('oe_title')]" position="replace">
                <group name="title">
                    <group name="oe_title">
                        <field name="analytic_account_id" readonly="1" force_save="1" string="Expediente"/>
                        <field name="name" string="Numero" readonly="1"/>
                    </group>
                    <group name="oe_subtitle">
                        <div name="paletsv">
                            <label for="paletsv"/>
                            <field name="paletsv" readonly="1"/>
                            <span> / </span>
                            <label for="palets"/>
                            <field name="palets" readonly="1"/>
                        </div>
                    </group>
                </group>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="plataforma" domain="[('partner_id','=',partner_id)]"/>
            </xpath>
            <xpath expr="//field[@name='validity_date']" position="before">
                <field name="id" readonly="1"/>
                <label for="edi_file_binary"/>
				<div class="o_row">
				    <div style="padding-left:0mm;" class="col-6">
                        <field name="edi_file_binary" context="{'default_res_id': id,'default_res_model': 'sale.order','default_res_name': 'EDI IMPORT'}"/>
                        <field name="edi_file" class="oe_inline" domain="[('res_id','=', id)]" context="{'default_res_id': id,'default_res_model': 'sale.order','default_res_name': 'EDI IMPORT'}" options="{'no_quick_create': True}" invisible="1"/>
                    </div>
                    <div class="col-6" style="padding-left:0mm;">
                        <button name="update_edi_file" string="Leer Fichero" type="object" class="oe_inline" attrs="{'invisible': [('edi_file', '=', False)]}"/>
                    </div>
                </div>
            </xpath>
            <xpath expr="//field[@name='date_order']" position="after">
                <field name="fechasalida"/>
                <label for="commitment_date" string="Fecha de llegada"/>
                <div name="commitment_date_div" class="o_row">
                    <field name="commitment_date"/>
                    <span name="expected_date_span" class="text-muted">Expected: <field name="expected_date" widget="date"/></span>
                </div>
                <field name="horallegada"/>
                <field name="conformalote" force_save="1"/>
                <label for="reslote"/>
				<div class="o_row">
				    <div style="padding-left:0mm;" class="col-6">
                        <field name="reslote"/>
                    </div>
                    <!--<div class="col-6" style="padding-left:0mm;">
                        <button name="onchange_conformalote" string="Calc" type="object"/>
                    </div>-->
                </div>
                <field name="pedidocerrado"/>
            </xpath>
        </field>
    </record>
    <record id="indaws_sale_purchase_extended_view_order_tree_1_inherit" model="ir.ui.view">
        <field name="name">indaws.sale.purchase.extended.view.order.tree.1.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_quotation_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="before">
                <field name="analytic_account_id" optional="show" string="Expediente"/>
            </xpath>
        </field>
    </record>
</odoo>